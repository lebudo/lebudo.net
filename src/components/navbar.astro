---
const pages = (await Astro.glob("../pages/*.md")).sort(
  (a, b) => a.frontmatter.position - b.frontmatter.position,
);

function isCurrent(page) {
  const trailingSlash = new RegExp("/$");
  return (
    Astro.url.pathname.replace(trailingSlash, "") ===
    page.url.replace(trailingSlash, "")
  );
}
---

<input id="navigation-toggle-box" type="checkbox" />

<label class="navigation-toggle" for="navigation-toggle-box">
  <span></span>
  <span></span>
  <span></span>
</label>

<nav class="navigation">
  {
    pages.map((page) => {
      if (page.frontmatter.title) {
        return (
          <a
            href={page.url || "/"}
            class={`
            navigation-item
            ${isCurrent(page) ? "navigation-item-current" : ""}
          `}
          >
            {page.frontmatter.title}
          </a>
        );
      }
    })
  }
</nav>
